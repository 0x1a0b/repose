buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }

    dependencies {
        classpath 'org.unbroken-dome.gradle-plugins:gradle-testsets-plugin:1.2.0'
        classpath 'com.netflix.nebula:nebula-dependency-recommender:3.1.0'
        classpath 'com.netflix.nebula:gradle-extra-configurations-plugin:3.0.3'
    }
}

allprojects {
    group = 'org.openrepose'
    version = '8.0.0.0'

    apply plugin: 'idea'
    apply plugin: 'nebula.dependency-recommender'


    repositories {
        mavenCentral()
    }
}

subprojects {

    apply plugin: 'java'
    apply plugin: 'groovy'
    apply plugin: 'scala'
    apply plugin: 'org.unbroken-dome.test-sets'
    apply plugin: 'nebula.provided-base'

    testSets {
        integrationTest
    }

    check.dependsOn integrationTest
    integrationTest.mustRunAfter test

    idea {
        module {
            testSourceDirs += project.sourceSets.integrationTest.allSource.srcDirs.flatten()
            scopes.TEST.plus += [configurations.integrationTestCompile]
        }
    }


    sourceCompatibility = 1.8
    targetCompatibility = 1.8
}

dependencyRecommendations {
    propertiesFile file: file('versions.properties')
}

ext.httpClientVersion = '4.4.1'
ext.xercesVersion = '2.12.0-rax'
ext.slf4jVersion = '1.7.7'
ext.junitVersion = '4.12'
ext.mockitoVersion = '1.9.5'
ext.scalaVersion = '2.10.3'
ext.scalaTestVersion = '2.2.0'
ext.scalaLoggingVersion = '2.1.2'
ext.groovyVersion = '2.1.3'
