<?xml version="1.0" encoding="UTF-8"?>

<power-proxy xmlns="http://docs.rackspacecloud.com/power-api/system-model/v2.0">
   
   <!-- REPOSE service domain -->
   <service-domain id="nova-repose">
      <service-domain-nodes>
         <node id="nova-n01" hostname="nova-n01.ord.internal.rackspace.corp" http-port="8088" />
         <node id="nova-n02" hostname="nova-n02.ord.internal.rackspace.corp" http-port="8088" />
      </service-domain-nodes>
      
      <filters>
         <filter name="client-authentication" />
         <filter name="client-authorization" />
         <filter name="dist-datastore" />
         <filter name="rate-limiting" />
         <filter name="default-router" />
      </filters>
      
      <destinations>
         <target-domain id="nova-domain" target-domain="nova-api" protocol="http" default="true" />
      </destinations>
   </service-domain>

   <!-- NOVA service domain.  No filters or destinations defined. -->
   <service-domain id="nova-api">
      <service-domain-nodes>
         <!-- each node can listen on a different port.  REPOSE will take this into account when 
              determining a target node -->
         <node id="nova-n01" hostname="nova-n01.ord.internal.rackspace.corp" http-port="8080" https-port="8443" />
         <node id="nova-n02" hostname="nova-n02.ord.internal.rackspace.corp" http-port="8081" https-port="8443" />
         <node id="nova-n03" hostname="nova-n03.ord.internal.rackspace.corp" http-port="8082" https-port="8443" />      
      </service-domain-nodes>
   </service-domain>
</power-proxy>
