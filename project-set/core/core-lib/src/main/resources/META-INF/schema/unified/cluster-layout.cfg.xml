<?xml version="1.0" encoding="UTF-8"?>

<power-proxy xmlns="http://docs.rackspacecloud.com/power-api/system-model/v2.0">
   <service-domain id="nova-auth">
      <service-domain-nodes>
         <node id="repose-nova-auth-n01" host="repose-nova-auth-n01.ord.internal.rackspace.corp" http-port="8080" />
         <node id="repose-nova-auth-n02" host="repose-nova-auth-n02.ord.internal.rackspace.corp" http-port="8080" />
      </service-domain-nodes>      
      
      <filters>
         <filter name="client-authentication" />
         <filter name="client-authorization" />
         <filter name="default-router" />
      </filters>
      
      <destinations>
         <target-domain id="limiting" target-domain="nova-rate-limiting" protocol="http" default="true"/>
      </destinations>
   </service-domain>
   
   <service-domain id="nova-rate-limiting">
      <service-domain-nodes>
         <node id="repose-nova-rl-n01" hostname="repose-nova-rl-n01.ord.internal.rackspace.corp" http-port="8080" />
         <node id="repose-nova-rl-n02" hostname="repose-nova-rl-n02.ord.internal.rackspace.corp" http-port="8080" />
      </service-domain-nodes>      

      <filters>
         <filter name="dist-datastore" />
         <filter name="rate-limiting" />
         <filter name="default-router" />
      </filters>
   
      <destinations>
         <target-domain id="nova" target-domain="nova-api" protocol="http" default="true"/>
      </destinations>
   </service-domain>

   <service-domain id="nova-api">
      <service-domain-nodes>
         <node id="nova-n01" hostname="nova-n01.ord.internal.rackspace.corp" http-port="8080" />
         <node id="nova-n02" hostname="nova-n02.ord.internal.rackspace.corp" http-port="8080" />
      </service-domain-nodes>      
   </service-domain>
   
</power-proxy>
